



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.0">
    
    
      
        <title>Services - Vapor Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.78aab2dc.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#services" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Vapor Docs" class="md-header-nav__button md-logo">
          
            <img src="../../images/droplet-white.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Vapor Docs
              </span>
              <span class="md-header-nav__topic">
                Services
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="http://github.com/vapor/vapor/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/droplet-white.svg" width="48" height="48">
      
    </span>
    Vapor Docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="http://github.com/vapor/vapor/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Install
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Install
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/macos/" title="macOS" class="md-nav__link">
      macOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../install/ubuntu/" title="Ubuntu" class="md-nav__link">
      Ubuntu
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hello-world/" title="Hello, world" class="md-nav__link">
      Hello, world
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../toolbox/" title="Toolbox" class="md-nav__link">
      Toolbox
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spm/" title="SPM" class="md-nav__link">
      SPM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../xcode/" title="Xcode" class="md-nav__link">
      Xcode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../structure/" title="Folder Structure" class="md-nav__link">
      Folder Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../application/" title="Application" class="md-nav__link">
      Application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../controllers/" title="Controllers" class="md-nav__link">
      Controllers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../routing/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../content/" title="Content" class="md-nav__link">
      Content
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../futures/" title="Futures" class="md-nav__link">
      Futures
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Services
      </label>
    
    <a href="./" title="Services" class="md-nav__link md-nav__link--active">
      Services
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#glossary" title="Glossary" class="md-nav__link">
    Glossary
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#container" title="Container" class="md-nav__link">
    Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ephemeralcontainer" title="EphemeralContainer" class="md-nav__link">
    EphemeralContainer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" title="Service" class="md-nav__link">
    Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" title="Environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registering" title="Registering" class="md-nav__link">
    Registering
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#concrete-implementations" title="Concrete implementations" class="md-nav__link">
    Concrete implementations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singletons" title="Singletons" class="md-nav__link">
    Singletons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protocol-conforming-services" title="Protocol conforming services" class="md-nav__link">
    Protocol conforming services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-multiple-conformances" title="Registering multiple conformances" class="md-nav__link">
    Registering multiple conformances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-for-a-specific-requester" title="Registering for a specific requester" class="md-nav__link">
    Registering for a specific requester
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#factorized-services" title="Factorized services" class="md-nav__link">
    Factorized services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environments" title="Environments" class="md-nav__link">
    Environments
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-configurations-per-environment" title="Changing configurations per environment" class="md-nav__link">
    Changing configurations per environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-service" title="Getting a Service" class="md-nav__link">
    Getting a Service
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cloud/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Routing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Routing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/parameters/" title="Parameters" class="md-nav__link">
      Parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/route/" title="Route" class="md-nav__link">
      Route
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../routing/router/" title="Router" class="md-nav__link">
      Router
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Fluent
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Fluent
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/models/" title="Models" class="md-nav__link">
      Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/migrations/" title="Migrations" class="md-nav__link">
      Migrations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/querying/" title="Querying" class="md-nav__link">
      Querying
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/query-builder/" title="Query Builder" class="md-nav__link">
      Query Builder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/schema-builder/" title="Schema Builder" class="md-nav__link">
      Schema Builder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/relations/" title="Relations" class="md-nav__link">
      Relations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/pivot/" title="Pivot" class="md-nav__link">
      Pivot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/transaction/" title="Transaction" class="md-nav__link">
      Transaction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fluent/database/" title="Database" class="md-nav__link">
      Database
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      PostgreSQL
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        PostgreSQL
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../postgresql/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postgresql/fluent/" title="Fluent PostgreSQL" class="md-nav__link">
      Fluent PostgreSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postgresql/core/" title="PostgreSQL Core" class="md-nav__link">
      PostgreSQL Core
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Leaf
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Leaf
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../leaf/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../leaf/basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../leaf/custom-tags/" title="Custom tags" class="md-nav__link">
      Custom tags
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Redis
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Redis
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../redis/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../redis/basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../redis/custom-commands/" title="Custom commands" class="md-nav__link">
      Custom commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../redis/pub-sub/" title="Publish and Subscribe" class="md-nav__link">
      Publish and Subscribe
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../redis/pipeline/" title="Pipeline" class="md-nav__link">
      Pipeline
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      WebSocket
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        WebSocket
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../websocket/websocket/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Crypto
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Crypto
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../crypto/getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../crypto/base64/" title="Base64" class="md-nav__link">
      Base64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../crypto/hash/" title="Hashes" class="md-nav__link">
      Hashes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../crypto/mac/" title="Message authentication" class="md-nav__link">
      Message authentication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../crypto/passwords/" title="Password hashing" class="md-nav__link">
      Password hashing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../crypto/random/" title="Random" class="md-nav__link">
      Random
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Version (3.0-alpha)
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Version (3.0-alpha)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../version/1_5/" title="1.5" class="md-nav__link">
      1.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../version/2_0/" title="2.0" class="md-nav__link">
      2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../version/3_0/" title="3.0-alpha" class="md-nav__link">
      3.0-alpha
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../version/support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#glossary" title="Glossary" class="md-nav__link">
    Glossary
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#container" title="Container" class="md-nav__link">
    Container
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ephemeralcontainer" title="EphemeralContainer" class="md-nav__link">
    EphemeralContainer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service" title="Service" class="md-nav__link">
    Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment" title="Environment" class="md-nav__link">
    Environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registering" title="Registering" class="md-nav__link">
    Registering
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#concrete-implementations" title="Concrete implementations" class="md-nav__link">
    Concrete implementations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#singletons" title="Singletons" class="md-nav__link">
    Singletons
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protocol-conforming-services" title="Protocol conforming services" class="md-nav__link">
    Protocol conforming services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-multiple-conformances" title="Registering multiple conformances" class="md-nav__link">
    Registering multiple conformances
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-for-a-specific-requester" title="Registering for a specific requester" class="md-nav__link">
    Registering for a specific requester
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#factorized-services" title="Factorized services" class="md-nav__link">
    Factorized services
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environments" title="Environments" class="md-nav__link">
    Environments
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changing-configurations-per-environment" title="Changing configurations per environment" class="md-nav__link">
    Changing configurations per environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-a-service" title="Getting a Service" class="md-nav__link">
    Getting a Service
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/vapor/documentation/edit/beta/3.0/docs/getting-started/services.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="services">Services<a class="headerlink" href="#services" title="Permanent link">&para;</a></h1>
<p>Services is a framework for creating things you need in your application in a type-safe fashion with protocol and environment support.</p>
<p>The Services framework is designed to be thread unsafe. The framework aims to guarantee that a service exists on the same <a href="../async/eventloop.md">EventLoop</a> it was created from and will be used on.</p>
<h2 id="glossary">Glossary<a class="headerlink" href="#glossary" title="Permanent link">&para;</a></h2>
<h3 id="container">Container<a class="headerlink" href="#container" title="Permanent link">&para;</a></h3>
<p>Containers are <a href="../async/eventloop.md">EventLoops</a> that can create and cache services.</p>
<p><a href="../http/request.md"><code>Request</code></a> is the most common <code>Container</code> type, which can be accessed in every <a href="../routing/"><code>Route</code></a>.</p>
<p>Containers cache instances of a given service (keyed by the requested protocol) on a per-container basis.</p>
<ol>
<li>Any given container has its own cache. No two containers will ever share a service instance, whether singleton or not.</li>
<li>A singleton service is chosen and cached only by which interface(s) it supports and the service tag.
There will only ever be one instance of a singleton service per-container, regardless of what requested it.</li>
<li>A normal service is chosen and cached by which interface(s) it supports, the service tag, and the requesting client interface.
There will be as many instances of a normal service per-container as there are unique clients requesting it.
(Remembering that clients are also interface types, not instances - that's the <code>for:</code> parameter to <code>.make()</code>)</li>
</ol>
<h3 id="ephemeralcontainer">EphemeralContainer<a class="headerlink" href="#ephemeralcontainer" title="Permanent link">&para;</a></h3>
<p>EphemeralContainers are containers that are short-lived.
Their cache does not stretch beyond a short lifecycle.
The most common EphemeralContainer is an <a href="../http/request.md">HTTP Request</a> which lives for the duration of the route handler.</p>
<h3 id="service">Service<a class="headerlink" href="#service" title="Permanent link">&para;</a></h3>
<p>Services are a type that can be requested from a Container. They are registered as part of the application setup.</p>
<p>Services are registered to a matching type or protocol it can represent, including it's own concrete type.</p>
<p>Services are registered to a blueprint before the <a href="../application/"><code>Application</code></a> is initialized. Together they make up the blueprint that Containers use to create an individual Service.</p>
<h3 id="environment">Environment<a class="headerlink" href="#environment" title="Permanent link">&para;</a></h3>
<p>Environments indicate the type of deployment/situation in which an application is ran. Environments can be used to change database credentials or API tokens per environment automatically.</p>
<h2 id="registering">Registering<a class="headerlink" href="#registering" title="Permanent link">&para;</a></h2>
<p>Services are registered as a concrete (singleton) type or factories. Singleton types should be a struct, but can be a class.</p>
<p>To create an empty list of Services you can call the initializer without parameters</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">services</span> <span class="p">=</span> <span class="n">Services</span><span class="p">()</span>
</pre></div>


<p>The Vapor framework has a default setup with the most common (and officially supported) Services already registered.</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nv">services</span> <span class="p">=</span> <span class="n">Services</span><span class="p">.</span><span class="k">default</span><span class="p">()</span>
</pre></div>


<h3 id="concrete-implementations">Concrete implementations<a class="headerlink" href="#concrete-implementations" title="Permanent link">&para;</a></h3>
<p>A common use case for registering a struct is for registering configurations.
Vapor 3 configurations are <em>always</em> a concrete struct type. Registering a concrete type is simple:</p>
<div class="codehilite"><pre><span></span><span class="kd">struct</span> <span class="nc">EmptyService</span> <span class="p">{}</span>

<span class="n">services</span><span class="p">.</span><span class="n">instance</span><span class="p">(</span><span class="n">EmptyService</span><span class="p">())</span>
</pre></div>


<h3 id="singletons">Singletons<a class="headerlink" href="#singletons" title="Permanent link">&para;</a></h3>
<p>Singleton services (which declare themselves, or were registered, as such) are cached on a per-container basis, but the singleton cache ignores which Client is requesting the service (whereas the normal cache does not).</p>
<p>Singleton classes <em>must</em> be thread-safe to prevent crashes. If you want your class to be a singleton type (across all threads):</p>
<div class="codehilite"><pre><span></span><span class="kr">final</span> <span class="kd">class</span> <span class="nc">SingletonService</span> <span class="p">{</span>
  <span class="kd">init</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="n">services</span><span class="p">.</span><span class="n">instance</span><span class="p">(</span><span class="n">isSingleton</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">SingletonService</span><span class="p">())</span>
</pre></div>


<p>Assuming the above service, you can now make this service from a container. The global container in Vapor is <code>Application</code> which <em>must not</em> be used within routes.</p>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">app</span> <span class="p">=</span> <span class="k">try</span> <span class="n">Application</span><span class="p">(</span><span class="n">services</span><span class="p">:</span> <span class="n">services</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">emptyService</span> <span class="p">=</span> <span class="n">app</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">EmptyService</span><span class="p">.</span><span class="kc">self</span><span class="p">)</span>
</pre></div>


<h3 id="protocol-conforming-services">Protocol conforming services<a class="headerlink" href="#protocol-conforming-services" title="Permanent link">&para;</a></h3>
<p>Often times when registering a service is conforms to one or more protocols for which it can be used. This is one of the more widely used use cases for Services.</p>
<div class="codehilite"><pre><span></span><span class="kd">enum</span> <span class="nc">Level</span> <span class="p">{</span>
  <span class="k">case</span> <span class="n">verbose</span><span class="p">,</span> <span class="n">error</span>
<span class="p">}</span>

<span class="kd">protocol</span> <span class="nc">Logger</span> <span class="p">{</span>
  <span class="kd">func</span> <span class="nf">log</span><span class="p">(</span><span class="kc">_</span> <span class="n">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">Level</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">PrintLogger</span><span class="p">:</span> <span class="n">Logger</span> <span class="p">{</span>
  <span class="kd">init</span><span class="p">()</span> <span class="p">{}</span>

  <span class="kd">func</span> <span class="nf">log</span><span class="p">(</span><span class="kc">_</span> <span class="n">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">Level</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">services</span><span class="p">.</span><span class="n">instance</span><span class="p">(</span><span class="n">Logger</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">PrintLogger</span><span class="p">())</span>
</pre></div>


<p>The above can be combined with <code>isSingleton: true</code></p>
<h3 id="registering-multiple-conformances">Registering multiple conformances<a class="headerlink" href="#registering-multiple-conformances" title="Permanent link">&para;</a></h3>
<p>A single type can conform to multiple protocols, and you might want to register a single service for all those conforming situations.</p>
<div class="codehilite"><pre><span></span><span class="kd">protocol</span> <span class="nc">Console</span> <span class="p">{</span>
  <span class="kd">func</span> <span class="nf">write</span><span class="p">(</span><span class="kc">_</span> <span class="n">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="n">AnsiColor</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">PrintConsole</span><span class="p">:</span> <span class="n">Console</span><span class="p">,</span> <span class="n">Logger</span> <span class="p">{</span>
  <span class="kd">func</span> <span class="nf">write</span><span class="p">(</span><span class="kc">_</span> <span class="n">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="n">AnsiColor</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">log</span><span class="p">(</span><span class="kc">_</span> <span class="n">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">Level</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">init</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="n">services</span><span class="p">.</span><span class="n">instance</span><span class="p">(</span>
  <span class="n">supports</span><span class="p">:</span> <span class="p">[</span><span class="n">Logger</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">Console</span><span class="p">.</span><span class="kc">self</span><span class="p">],</span>
  <span class="n">ErrorLogger</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>


<h3 id="registering-for-a-specific-requester">Registering for a specific requester<a class="headerlink" href="#registering-for-a-specific-requester" title="Permanent link">&para;</a></h3>
<p>Sometimes, the implementation should change depending on the user. A database connector might need to run over a VPN tunnel, redis might use an optimized local loopback whilst the default implementation is a normal TCP socket.</p>
<p>Other times, you simply want to change the log destination depending on the type that's logging (such as logging HTTP errors differently from database errors).</p>
<p>This comes in useful when changing configurations per situation, too.</p>
<div class="codehilite"><pre><span></span><span class="kd">struct</span> <span class="nc">VerboseLogger</span><span class="p">:</span> <span class="n">Logger</span> <span class="p">{</span>
  <span class="kd">init</span><span class="p">()</span> <span class="p">{}</span>

  <span class="kd">func</span> <span class="nf">log</span><span class="p">(</span><span class="kc">_</span> <span class="n">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">Level</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">ErrorLogger</span><span class="p">:</span> <span class="n">Logger</span> <span class="p">{</span>
  <span class="kd">init</span><span class="p">()</span> <span class="p">{}</span>

  <span class="kd">func</span> <span class="nf">log</span><span class="p">(</span><span class="kc">_</span> <span class="n">message</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">Level</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">level</span> <span class="p">==</span> <span class="p">.</span><span class="n">error</span> <span class="p">{</span>
      <span class="bp">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Only log errors</span>
<span class="n">services</span><span class="p">.</span><span class="n">instance</span><span class="p">(</span><span class="n">Logger</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">ErrorLogger</span><span class="p">())</span>

<span class="c1">// Except the router, do log not found errors verbosely</span>
<span class="n">services</span><span class="p">.</span><span class="n">instance</span><span class="p">(</span><span class="n">Logger</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">PrintLogger</span><span class="p">(),</span> <span class="k">for</span><span class="p">:</span> <span class="n">Router</span><span class="p">.</span><span class="kc">self</span><span class="p">)</span>
</pre></div>


<h3 id="factorized-services">Factorized services<a class="headerlink" href="#factorized-services" title="Permanent link">&para;</a></h3>
<p>Some services have dependencies. An extremly useful use case is TLS, where the implementation is separated from the protocol. This allows users to create a TLS socket to connect to another host without relying on a specific implementation. Vapor uses this to better integrate with the operating system by changing the default TLS implementation from OpenSSL on Linux to the Transport Security Framework on macOS and iOS.</p>
<p>Factorized services get access to the event loop to factorize dependencies.</p>
<div class="codehilite"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">register</span> <span class="p">{</span> <span class="n">container</span> <span class="p">-&gt;</span> <span class="n">GithubClient</span> <span class="k">in</span>
  <span class="c1">// Create an HTTP client for our GithubClient</span>
  <span class="kd">let</span> <span class="nv">client</span> <span class="p">=</span> <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">Client</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="k">for</span><span class="p">:</span> <span class="n">GithubClient</span><span class="p">.</span><span class="kc">self</span><span class="p">)</span>
  <span class="k">try</span> <span class="n">client</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">hostname</span><span class="p">:</span> <span class="s">&quot;github.com&quot;</span><span class="p">,</span> <span class="n">ssl</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>

  <span class="k">return</span> <span class="n">GithubClient</span><span class="p">(</span><span class="n">using</span><span class="p">:</span> <span class="n">client</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<p>Please do note that we explicitly stated that the <code>GithubClient</code> requests an (HTTP) Client. We recommend doing this at all times, so that you leave configuration options open.</p>
<h2 id="environments">Environments<a class="headerlink" href="#environments" title="Permanent link">&para;</a></h2>
<p>Vapor 3 supports (custom) environments. By default we recommend (and support) the <code>.production</code>, <code>.development</code> and <code>.testing</code> environments.</p>
<p>You can create a custom environment type as <code>.custom(&lt;my-environment-name&gt;)</code>.</p>
<div class="codehilite"><pre><span></span><span class="kd">let</span> <span class="nv">environment</span> <span class="p">=</span> <span class="n">Environment</span><span class="p">.</span><span class="n">custom</span><span class="p">(</span><span class="s">&quot;staging&quot;</span><span class="p">)</span>
</pre></div>


<p>Containers give access to the current environment, so libraries may change behaviour depending on the environment.</p>
<h3 id="changing-configurations-per-environment">Changing configurations per environment<a class="headerlink" href="#changing-configurations-per-environment" title="Permanent link">&para;</a></h3>
<p>For easy of development, some parameters may and should change for easy of debugging.
Password hashes can be made intentionally weaker in development scenarios to compensate for debug compilation performance, or API tokens may change to the correct one for your environment.</p>
<div class="codehilite"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">register</span> <span class="p">{</span> <span class="n">container</span> <span class="p">-&gt;</span> <span class="n">BCryptConfig</span> <span class="k">in</span>
  <span class="kd">let</span> <span class="nv">cost</span><span class="p">:</span> <span class="nb">Int</span>

  <span class="k">switch</span> <span class="n">container</span><span class="p">.</span><span class="n">environment</span> <span class="p">{</span>
  <span class="k">case</span> <span class="p">.</span><span class="n">production</span><span class="p">:</span>
      <span class="n">cost</span> <span class="p">=</span> <span class="mi">12</span>
  <span class="k">default</span><span class="p">:</span>
      <span class="n">cost</span> <span class="p">=</span> <span class="mi">4</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">BCryptConfig</span><span class="p">(</span><span class="n">cost</span><span class="p">:</span> <span class="n">cost</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<h2 id="getting-a-service">Getting a Service<a class="headerlink" href="#getting-a-service" title="Permanent link">&para;</a></h2>
<p>To get a service you need an existing container matching the current EventLoop.
If you're processing a <a href="../http/request.md"><code>Request</code></a>, you should almost always use the Request as a Container type.</p>
<div class="codehilite"><pre><span></span><span class="c1">// ErrorLogger</span>
<span class="kd">let</span> <span class="nv">errorLogger</span> <span class="p">=</span> <span class="n">myContainerType</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">Logger</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="k">for</span><span class="p">:</span> <span class="n">Request</span><span class="p">.</span><span class="kc">self</span><span class="p">)</span>

<span class="c1">// PrintLogger</span>
<span class="kd">let</span> <span class="nv">printLogger</span> <span class="p">=</span> <span class="n">myContainerType</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">Logger</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="k">for</span><span class="p">:</span> <span class="n">Router</span><span class="p">.</span><span class="kc">self</span><span class="p">)</span>
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../futures/" title="Futures" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Futures
              </span>
            </div>
          </a>
        
        
          <a href="../cloud/" title="Deployment" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Deployment
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Qutheory, LLC
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://twitter.com/@codevapor" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="http://vapor.team/" class="md-footer-social__link fa fa-slack"></a>
    
      <a href="https://github.com/vapor" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.8eb9be28.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-76177358-4","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>